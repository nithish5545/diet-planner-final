<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Home</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif}

/* ğŸ”’ BACKGROUND UNCHANGED */
body{
    background: linear-gradient(135deg,#0d0d0d,#1a1a1a,#3b3b3b);
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    padding:20px;
    color:white;
}

.container{
    max-width:650px;
    width:100%;
    background:rgba(255,255,255,0.1);
    padding:25px;
    border-radius:15px;
}

h2{text-align:center;margin-bottom:15px}
.card{
    background:rgba(255,255,255,0.15);
    padding:20px;
    margin:15px 0;
    border-radius:12px;
}

/* ğŸ’§ WATER */
.glass-container{
    display:flex;
    justify-content:center;
    gap:10px;
    margin-top:15px;
}

.glass{
    width:55px;
    height:90px;
    border:2px solid #00eaff;
    border-radius:0 0 10px 10px;
    position:relative;
    overflow:hidden;
    cursor:pointer;
}

.water{
    position:absolute;
    bottom:0;
    width:100%;
    height:0%;
    background:linear-gradient(180deg,#00eaff,#007b8f);
    transition:height 0.6s ease;
}

.glass.filled .water{height:100%}

/* +250 ml popup */
#waterPopup{
    text-align:center;
    margin-top:8px;
    font-weight:bold;
    color:#00eaff;
    opacity:0;
}

@keyframes floatUp{
    from{opacity:0;transform:translateY(10px)}
    to{opacity:1;transform:translateY(-10px)}
}

/* ğŸ‰ */
.celebrate{
    display:none;
    text-align:center;
    margin-top:15px;
    animation:pop 0.7s infinite alternate;
}
@keyframes pop{to{transform:scale(1.1)}}

/* ğŸ‹ï¸ WORKOUT */
.tick{
    display:block;
    margin:8px 0;
    cursor:pointer;
}
.tick input{margin-right:8px;transform:scale(1.2)}

/* ğŸ“Š CHART */
canvas{width:100%;background:rgba(0,0,0,0.2);border-radius:8px}

/* ğŸ”˜ BUTTONS */
.buttons{
    display:flex;
    justify-content:space-around;
    margin-top:15px;
}
button{
    padding:12px;
    border:none;
    border-radius:10px;
    background:#00eaff;
    font-weight:bold;
    cursor:pointer;
}
</style>
</head>

<body>
<div class="container">
<h2>Welcome, <span id="userName"></span> ğŸ‘‹</h2>

<!-- ğŸ’§ WATER -->
<div class="card">
<h3>ğŸ’§ Water Intake</h3>
<p style="text-align:center">Tap glass â€¢ 250 ml â€¢ Goal 2000 ml</p>

<div class="glass-container" id="glassContainer"></div>

<p style="text-align:center;margin-top:10px">
Drank: <b><span id="waterAmount">0</span> ml</b>
</p>

<div id="waterPopup">+250 ml ğŸ’§</div>

<div class="celebrate" id="celebrate">
<h3>ğŸ‰ Hydration Goal Completed!</h3>
</div>
</div>

<!-- ğŸ‹ï¸ WORKOUT -->
<div class="card">
<h3>ğŸ‹ï¸ Todayâ€™s Workout</h3>

<div id="workoutPlan">
<label class="tick"><input type="checkbox" onchange="updateWorkout()"> Push-ups (3Ã—15)</label>
<label class="tick"><input type="checkbox" onchange="updateWorkout()"> Squats (3Ã—20)</label>
<label class="tick"><input type="checkbox" onchange="updateWorkout()"> Cardio (20 min)</label>
<label class="tick"><input type="checkbox" onchange="updateWorkout()"> Stretching (10 min)</label>
</div>

<p style="text-align:center;margin-top:10px">
Completed: <b><span id="workoutCount">0</span>/4</b>
</p>
</div>

<!-- ğŸ“Š WEEKLY -->
<div class="card">
<h3>ğŸ“Š Weekly Workout Progress</h3>
<canvas id="weeklyChart" width="320" height="180"></canvas>
</div>

<div class="buttons">
<button onclick="location.href='exercise.html'">Exercise</button>
<button onclick="location.href='diet.html'">Diet</button>
<button onclick="location.href='about.html'">About</button>
</div>
</div>

<script>
/* USER */
const userData = JSON.parse(localStorage.getItem("userData")) || {};
userName.innerText = userData.name || "User";

/* ğŸ’§ WATER */
const TOTAL_GLASSES = 8;
const GLASS_ML = 250;
const today = new Date().toDateString();

if(localStorage.getItem("waterDate") !== today){
    localStorage.setItem("waterCount", 0);
    localStorage.setItem("waterDate", today);
}

let filled = parseInt(localStorage.getItem("waterCount")) || 0;

// Create glasses
glassContainer.innerHTML = "";
for(let i=0;i<TOTAL_GLASSES;i++){
    const g = document.createElement("div");
    g.className = "glass";
    const w = document.createElement("div");
    w.className = "water";
    g.appendChild(w);
    if(i<filled) g.classList.add("filled");
    glassContainer.appendChild(g);
}

function updateWaterText(){
    waterAmount.innerText = filled * GLASS_ML;
    celebrate.style.display = filled === TOTAL_GLASSES ? "block" : "none";
}
updateWaterText();

glassContainer.onclick = () => {
    if(filled >= TOTAL_GLASSES) return;
    glassContainer.children[filled].classList.add("filled");
    filled++;
    localStorage.setItem("waterCount", filled);
    updateWaterText();
    waterPopup.style.opacity = "1";
    waterPopup.style.animation = "floatUp 0.6s ease";
    setTimeout(()=>{
        waterPopup.style.opacity = "0";
        waterPopup.style.animation = "";
    },700);
};

/* ğŸ‹ï¸ WORKOUT */
const workoutKey = "workout_" + today;
const checks = document.querySelectorAll("#workoutPlan input");
const workoutCountEl = document.getElementById("workoutCount");

// Load saved
const saved = JSON.parse(localStorage.getItem(workoutKey)) || [];
checks.forEach((c,i)=>c.checked=saved[i]||false);

updateWorkout();
drawWeeklyChart();

function updateWorkout(){
    let done=0, state=[];
    checks.forEach(c=>{if(c.checked)done++; state.push(c.checked)});
    workoutCountEl.innerText = done;
    localStorage.setItem(workoutKey, JSON.stringify(state));
    updateWeeklyProgress(done);
    drawWeeklyChart();
}

/* ğŸ“Š WEEKLY CHART */
function updateWeeklyProgress(doneToday){
    let week = JSON.parse(localStorage.getItem("weeklyProgress")) || [0,0,0,0,0,0,0];
    week.shift(); // remove oldest
    week.push(doneToday); // today's completed workouts
    localStorage.setItem("weeklyProgress", JSON.stringify(week));
}

function drawWeeklyChart(){
    const ctx = weeklyChart.getContext("2d");
    const data = JSON.parse(localStorage.getItem("weeklyProgress")) || [1,2,3,2,3,4,2];
    ctx.clearRect(0,0,weeklyChart.width,weeklyChart.height);
    data.forEach((v,i)=>{
        const bw=30, sp=15;
        const x=i*(bw+sp)+20;
        const h=v*30;
        ctx.fillStyle="#00eaff";
        ctx.fillRect(x,weeklyChart.height-h-20,bw,h);
        ctx.fillStyle="#fff";
        ctx.fillText("D"+(i+1),x+6,weeklyChart.height-5);
    });
}
</script>
</body>
</html>

